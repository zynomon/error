<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>InspectNerds</title>
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <style>
            html,
            body {
                height: 100%;
                margin: 0;
                background: #0b0b0c;
                color: #e0e0e0;
                font-family: Inter, system-ui, monospace;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .mock-ui {
                max-width: 820px;
                padding: 48px;
                border-radius: 12px;
                background: linear-gradient(180deg, #0f0f10, #070708);
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
                text-align: center;
            }
            h1 {
                margin: 0 0 10px;
                font-family: "Courier New", monospace;
                letter-spacing: 1px;
            }
            p {
                margin: 0;
                color: #9aa0a6;
            }
            .hint {
                margin-top: 18px;
                color: #7f8a91;
                font-size: 13px;
            }
        </style>
    </head>

        <script>
            (function () {
                const CFG = {
                    detectInterval: 300,
                    threshold: 160,
                    errSpamMs: 2200,
                    errRate: 70,
                    initHold: 900,
                    asciiFPS: 20,
                    width: 86,
                    height: 36,
                    chars: " .:-=+*#%@",
                    maxErrNumber: 99999,
                };

                let started = false;
                let devtoolsOpen = false;

                function detectDevtools() {
                    const widthThreshold =
                        window.outerWidth - window.innerWidth > CFG.threshold;
                    const heightThreshold =
                        window.outerHeight - window.innerHeight > CFG.threshold;
                    return widthThreshold || heightThreshold;
                }

                function once(fn) {
                    let done = false;
                    return function (...a) {
                        if (done) return;
                        done = true;
                        return fn(...a);
                    };
                }

                function styled(msg, css) {
                    console.log("%c" + msg, css);
                }

                function randErr() {
                    return (
                        "ERR_" +
                        Math.floor(Math.random() * CFG.maxErrNumber)
                            .toString()
                            .padStart(5, "0")
                    );
                }

                function spamErrs(duration, rate) {
                    const start = Date.now();
                    return new Promise((resolve) => {
                        const t = setInterval(() => {
                            styled(
                                randErr(),
                                "color:#ff3b3b;font-family:monospace;font-weight:700",
                            );
                            if (Date.now() - start > duration) {
                                clearInterval(t);
                                resolve();
                            }
                        }, rate);
                    });
                }

                function sleep(ms) {
                    return new Promise((r) => setTimeout(r, ms));
                }

                function showInitSequence() {
                    console.clear();
                    styled(
                        "DEVELOPER MODE: UNLOCKED",
                        "color:#ff5a5a;font-size:18px;font-weight:800;font-family:monospace",
                    );
                    styled(
                        "> initializing_render_core()",
                        "color:#00d7ff;font-family:monospace",
                    );
                    styled(
                        "> loading_graphics_subsystem()",
                        "color:#00d7ff;font-family:monospace",
                    );
                    styled(
                        "> error_stream_pipe: OPEN",
                        "color:#ff925a;font-family:monospace",
                    );
                }

                function showTerminatedPause(duration) {
                    return new Promise((resolve) => {
                        const term = { visible: true };
                        let txt = "> terminated_";
                        const css =
                            "color:#00ff66;font-family:monospace;font-weight:700;text-shadow:0 0 6px #00ff66";
                        const id = setInterval(() => {
                            console.clear();
                            styled(txt, css);
                            term.visible = !term.visible;
                            txt = term.visible
                                ? "> terminated_"
                                : "> terminated";
                        }, 500);

                        setTimeout(() => {
                            clearInterval(id);
                            console.clear();
                            resolve();
                        }, duration);
                    });
                }

                function generateAsciiFrame(t) {
                    const W = CFG.width,
                        H = CFG.height,
                        chars = CFG.chars;
                    const wave = Math.sin;
                    let out = "";
                    for (let y = 0; y < H; y++) {
                        let row = "";
                        for (let x = 0; x < W; x++) {
                            const nx = x / W - 0.5;
                            const ny = y / H - 0.5;
                            const v =
                                0.5 +
                                0.5 *
                                    Math.sin(
                                        (nx * 14 + t * 0.02) *
                                            (1 + Math.sin(t * 0.001 + ny * 7)),
                                    ) *
                                    Math.cos(
                                        (ny * 18 - t * 0.018) *
                                            (1 + Math.cos(t * 0.001 + nx * 6)),
                                    );
                            const noisy = v + (Math.random() - 0.5) * 0.12;
                            const idx = Math.max(
                                0,
                                Math.min(
                                    chars.length - 1,
                                    Math.floor(noisy * chars.length),
                                ),
                            );
                            row += chars[idx];
                        }
                        out += row + "\n";
                    }
                    return out;
                }

                function startAsciiLoop() {
                    let last = 0;
                    function frame(now) {
                        if (!devtoolsOpen) return;
                        const elapsed = now - last;
                        if (elapsed >= 1000 / CFG.asciiFPS) {
                            last = now;
                            const ascii = generateAsciiFrame(now);
                            console.clear();
                            styled(
                                "ERR STREAM: active",
                                "color:#ff3b3b;font-family:monospace;font-weight:700",
                            );
                            console.log(
                                "%c" + ascii,
                                "color:#ff5353; font-family:monospace; white-space: pre; font-size:7px; line-height:7px",
                            );
                        }
                        requestAnimationFrame(frame);
                    }
                    requestAnimationFrame(frame);
                }

                async function startCursedConsole() {
                    if (started) return;
                    started = true;
                    devtoolsOpen = true;
                    console.clear();
                    await spamErrs(CFG.errSpamMs, CFG.errRate);
                    showInitSequence();
                    await sleep(CFG.initHold);
                    await showTerminatedPause(1000);
                    startAsciiLoop();
                }

                const startOnce = once(startCursedConsole);

                setInterval(() => {
                    const open = detectDevtools();
                    if (open && !devtoolsOpen) {
                        startOnce();
                    }
                    if (!open && devtoolsOpen) {
                        devtoolsOpen = false;
                        console.clear();
                    }
                }, CFG.detectInterval);

                (function detectWithDebugger() {
                    let wasOpen = false;
                    setInterval(() => {
                        const start = Date.now();
                        debugger;
                        const end = Date.now();
                        if (end - start > 100) {
                            if (!wasOpen) {
                                wasOpen = true;
                                startOnce();
                            }
                        } else {
                            wasOpen = false;
                        }
                    }, 2000);
                })();
            })();
        </script>
    </body>
</html>
